!function(t){var a=function(a){var e={val:"0",isAnyString:!1},i=[],n=0;if("number"==typeof a&&(a+=""),"string"==typeof a)if(i=a.split("").filter(function(a,i){return!!t.isNumeric(a)||(e.isAnyString=!0,!1)}),i.length)e.val=i.join("");else{for(var s=0;s<a.length;s++)n+=a.charCodeAt(s);e.val=n+"",e.isAnyString=!1}return e},e=function(a){var e=[];return t.each(a,function(t,a){a.unshift(t),e.push(a)}),e},i=function(t,e,i,n){var s=a(t[i]),r=a(e[i]),o=s.val.length>r.val.length?s.val.length:r.val.length,p=0;if(s.isAnyString||r.isAnyString)for(var d=0;d<o;d++){if(parseInt(s.val[d])>parseInt(r.val[d])){p=1;break}if(parseInt(s.val[d])<parseInt(r.val[d])){p=-1;break}}else p=parseInt(s.val)-parseInt(r.val);return p="desc"===n?p:-p},n=function(a,e){this.options=e,this.$el=t(a),this.$el_=this.$el.clone(),this.bufferData=[],this.pageData=[],this.currentPage=1,this.initTable()};n.DEFAULTS={pagination:!0,pageOptions:{pageItems:10},sort:!0,sortCols:[],sortDefaultCol:0,sortIcons:["fa fa-long-arrow-down","fa fa-long-arrow-up"],search:!0,data:[]},n.prototype.initTable=function(){var t=e(this.options.data);this.options.data=t,this.bufferData=t,this.$el.wrap('<div class="simpleTable" />'),this.$el.append("<tbody></tbody>"),this.options.pagination?this.initPagination():this.pageData=t,this.options.search&&this.initSearch(),this.options.sort&&this.initSort(),this.updateTable()},n.prototype.updateTable=function(){var a=this.$el.find("tbody"),e=this.pageData,i=[];a.children().detach(),e.length&&t.each(e,function(t,a){i.push('<tr data-rowid="'+a[0]+'">');for(var e=1;e<a.length;e++)i.push("<td>"+a[e]+"</td>");i.push("</tr>")}),a.append(i.join(""))},n.prototype.initSearch=function(){var a=this;a.$el.find("tbody");t('<input type="text" class="stSearch" placeholder="搜索"></input>').insertBefore(this.$el),a.$el.parent().find("input").on("keyup",function(){var e=t(this).val();a.bufferData=[],t.each(a.options.data,function(t,i){for(var n=1;n<i.length;n++)if((""+i[n]).toLowerCase().indexOf(e)>=0){a.bufferData.push(i);break}}),a.updatePagination(),a.updatePageNumber(),a.updateTable()})},n.prototype.initPagination=function(){t('<div class="pagination"></div>').insertAfter(this.$el),this.$el.parent().find(".pagination").append('<span><a href="javascript: void(0);" class="stfront" data-stfront="0">&lt;</a><span class="pageNumber"></span><a href="javascript: void(0);" class="stback" data-stback="2">&gt;</a></span>'),this.updatePagination(),this.updatePageNumber(),this.onPagination()},n.prototype.updatePagination=function(){if(!this.options.pagination)return void(this.pageData=this.bufferData);var t=this.bufferData,a=this.options.pageOptions.pageItems,e=Math.ceil(t.length/a),i=(this.currentPage-1)*a,n=this.currentPage===e?t.length:i+a;if(this.pageData=[],t.length)for(var s=i;s<n;s++)this.pageData.push(t[s])},n.prototype.updatePageNumber=function(){if(this.options.pagination){var t=Math.ceil(this.bufferData.length/this.options.pageOptions.pageItems),a=this.$el.parent().find(".pagination .pageNumber"),e=[],i=this.currentPage;a.children().detach();for(var n=0;n<t;n++)e.push('<a href="javascript: void(0);" class="'+(i===n+1?"active":"")+'" data-stpage="'+(n+1)+'">'+(n+1)+"</a>");a.append(e.join(""))}},n.prototype.onPagination=function(){var a=this.$el.parent().find(".pagination"),e=this;a.find("[data-stfront]").on("click",function(){e.currentPage>1&&(a.find('[data-stpage="'+e.currentPage+'"]').removeClass("active"),e.currentPage-=1,a.find('[data-stpage="'+e.currentPage+'"]').addClass("active"),t(this).attr("data-stfront",e.currentPage-1),a.find("[data-stback]").attr("data-stback",e.currentPage+1),e.updatePagination(),e.updateTable())}),a.find("[data-stback]").on("click",function(){var i=parseInt(t(this).attr("data-stback")),n=Math.ceil(e.bufferData.length/e.options.pageOptions.pageItems);i<=n&&(a.find('[data-stpage="'+e.currentPage+'"]').removeClass("active"),e.currentPage+=1,a.find('[data-stpage="'+e.currentPage+'"]').addClass("active"),a.find("[data-stfront]").attr("data-stfront",e.currentPage-1),t(this).attr("data-stback",e.currentPage+1),e.updatePagination(),e.updateTable())}),a.on("click","[data-stpage]",function(){a.find('[data-stpage="'+e.currentPage+'"]').removeClass("active"),e.currentPage=parseInt(t(this).attr("data-stpage")),a.find('[data-stpage="'+e.currentPage+'"]').addClass("active"),a.find("[data-stfront]").attr("data-stfront",e.currentPage-1),a.find("[data-stback]").attr("data-stfront",e.currentPage+1),e.updatePagination(),e.updateTable()})},n.prototype.initSort=function(){for(var a=this.$el.find("thead"),e=a.find("th"),n=(this.options.data,this.options.sortIcons),s=(n[0].split(" ")[0],n[0].split(" ")[1]),r=n[1].split(" ")[1],o=this.options.sortCols,p=this.options.sortDefaultCol,d=this,h=0;h<e.length;h++)(o[h]||"undefined"==typeof o[h])&&(t(e[h]).attr("data-sort",h+1),t(e[h]).attr("data-sorttype","desc"),t(e[h]).append('&nbsp<i class="'+n[0]+'"></i>'));p&&(this.bufferData.sort(function(t,a){return i(t,a,p,"asc")}),this.updatePagination(),this.updateTable()),a.on("click","[data-sort]",function(){var a=t(this).attr("data-sort"),e=t(this).attr("data-sorttype"),n=t(this);n.find(".fa").removeClass("desc"===e?s:r),n.attr("data-sorttype","desc"===e?"asc":"desc"),n.find(".fa").addClass("desc"===e?r:s),d.bufferData.sort(function(t,n){return i(t,n,a,e)}),d.updatePagination(),d.updateTable()})},n.prototype.append=function(t){t.unshift(this.options.data.length),this.options.data.unshift(t),this.updatePagination(),this.updatePageNumber(),this.updateTable()},n.prototype.remove=function(a){var e=parseInt(a.attr("data-rowid")),i=this;t.each(this.options.data,function(t,a){if(a[0]===e)return i.options.data.splice(t,1),!1}),this.updatePagination(),this.updatePageNumber(),this.updateTable()},n.prototype.update=function(a){var e=parseInt(a[0].attr("data-rowid")),i=this;t.each(this.options.data,function(t,n){if(n[0]===e)return i.options.data[t]=a[1],i.options.data[t].unshift(e),!1}),this.updatePagination(),this.updateTable()},n.prototype.reload=function(t){var a=e(t);this.options.data=a,this.bufferData=a,this.updatePagination(),this.updatePageNumber(),this.updateTable()};var s=["append","remove","update","reload"];t.fn.simpleTable=function(a){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var i=t(this),r=i.data("simpleTable"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof a&&a);if("string"==typeof a){if(t.inArray(a,s)<0)throw new Error("Unknow method: "+a);if(!r)return;switch(a){case"append":r.append(e[0]);break;case"remove":r.remove(e[0]);break;case"update":r.update(e);break;case"reload":r.reload(e[0])}}r||i.data("simpleTable",r=new n(this,o))})},t.fn.simpleTable.Constructor=n,t.fn.simpleTable.defaults=n.DEFAULTS,t.fn.simpleTable.methods=s}(jQuery);